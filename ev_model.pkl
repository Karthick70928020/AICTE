import pandas as pd
import numpy as np
from sklearn.ensemble import RandomForestRegressor
from sklearn.model_selection import train_test_split
import pickle

# Sample dummy data (replace with your real EV dataset)
np.random.seed(42)
data = pd.DataFrame({
    "year": np.arange(2010, 2025),
    "charging_stations": np.random.randint(100, 500, size=15),
    "ev_sales": np.random.randint(1000, 10000, size=15)
})

# Features and target
X = data[["year", "charging_stations"]]
y = data["ev_sales"]

# Train/test split
X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2, random_state=42)

# Train model
model = RandomForestRegressor(random_state=42)
model.fit(X_train, y_train)

# Save model to .pkl
with open("ev_model.pkl", "wb") as f:
    pickle.dump(model, f)

print("ev_model.pkl saved successfully!")

